{"version":3,"file":"ionar-utility.umd.js.map","sources":["ng://@ionar/utility/observables/take-until-destroy.ts"],"sourcesContent":["import {Observable, Subject} from 'rxjs';\r\nimport {takeUntil} from 'rxjs/operators';\r\n\r\nfunction isFunction(value) {\r\n    return typeof value === 'function';\r\n}\r\n\r\nexport const untilDestroyed = (\r\n    componentInstance,\r\n    destroyMethodName = 'ngOnDestroy'\r\n) => <T>(source: Observable<T>) => {\r\n    const originalDestroy = componentInstance[destroyMethodName];\r\n    if (isFunction(originalDestroy) === false) {\r\n        throw new Error(\r\n            `${\r\n                componentInstance.constructor.name\r\n                } is using untilDestroyed but doesn't implement ${destroyMethodName}`\r\n        );\r\n    }\r\n    if (!componentInstance['__takeUntilDestroy']) {\r\n        componentInstance['__takeUntilDestroy'] =\r\n            componentInstance['__takeUntilDestroy'] || new Subject();\r\n\r\n        componentInstance[destroyMethodName] = function () {\r\n            isFunction(originalDestroy) && originalDestroy.apply(this, arguments);\r\n            componentInstance['__takeUntilDestroy'].next(true);\r\n            componentInstance['__takeUntilDestroy'].complete();\r\n        };\r\n    }\r\n    return source.pipe(takeUntil<T>(componentInstance['__takeUntilDestroy']));\r\n};"],"names":["Subject","takeUntil"],"mappings":";;;;;;;;;;AAAA;;;;IAGA,SAAS,UAAU,CAAC,KAAK;QACrB,OAAO,OAAO,KAAK,KAAK,UAAU,CAAC;IACvC,CAAC;;AAED,QAAa,cAAc,GAAG,UAC1B,iBAAiB,EACjB,iBAAiC;QAAjC,kCAAA;YAAA,iCAAiC;;QAChC,OAAA,UAAI,MAAqB;;gBACpB,eAAe,GAAG,iBAAiB,CAAC,iBAAiB,CAAC;YAC5D,IAAI,UAAU,CAAC,eAAe,CAAC,KAAK,KAAK,EAAE;gBACvC,MAAM,IAAI,KAAK,CAEP,iBAAiB,CAAC,WAAW,CAAC,IAAI,uDACgB,iBAAmB,CAC5E,CAAC;aACL;YACD,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,EAAE;gBAC1C,iBAAiB,CAAC,oBAAoB,CAAC;oBACnC,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,IAAIA,YAAO,EAAE,CAAC;gBAE7D,iBAAiB,CAAC,iBAAiB,CAAC,GAAG;oBACnC,UAAU,CAAC,eAAe,CAAC,IAAI,eAAe,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;oBACtE,iBAAiB,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnD,iBAAiB,CAAC,oBAAoB,CAAC,CAAC,QAAQ,EAAE,CAAC;iBACtD,CAAC;aACL;YACD,OAAO,MAAM,CAAC,IAAI,CAACC,mBAAS,CAAI,iBAAiB,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;SAC7E;IApBI,CAoBJ;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
